# -*- coding:utf-8 -*-import jpush as jpushimport push_error as errorimport sysapp_key = u'e946ee055b7cd6c1ab119f03'master_secret = u'7e0a4fb007ec3317f63c321d'def sendPush(version, appname):    _jpush = jpush.JPush(app_key, master_secret)  ##1、初始化JPush，获取AppKey，Master Secret;实例化JPush，    push = _jpush.create_push()    # if you set the logging level to "DEBUG",it will show the debug logging.    # _jpush.set_logging("DEBUG")    # --------------------------------推送设备对象---------------------------    # 一个推送对象，以 JSON 格式表达，表示一条推送相关的所有信息。    # push.audience=jpush.all_ ;#audience    必填  推送设备指定;确认推送设备对象，JPush 提供了多种方式，比如：别名、标签、注册ID、分群、广播等。    push.audience = jpush.all_    message = appname + '版本:' + version + '已经更新成功，请下载安装测试'    print(message)    push.notification = jpush.notification(alert=message)    #    # # ----------------------------自定义消息 的实现---------------    # push.message = jpush.message(    #     "{'salists': [{'payType': 1, 'proid': 3, 'name': '燕麦谷粒多', 'count': 1, 'sinPrice': 2, 'toPrice': 2, 'chid': 162}], 'nums': 1}");  # message  可选  消息内容体。是被推送到客户端的内容。与 notification 一起二者必须有其一，可以二者并存    # # ------------------------------------------------------------------------    push.platform = jpush.all_  # platform   必填  推送平台设置    try:        response = push.send()        print('send')    except error.Unauthorized:        print('send1')        raise error.Unauthorized("Unauthorized")    except error.APIConnectionException:        print('send2')        raise error.APIConnectionException("conn error")    except error.JPushFailure:        print("JPushFailure")    except:        print("Exception")sendPush(sys.argv[1], sys.argv[2])print('done')